package biz.placelink.aicas.com.config;

import jakarta.annotation.PostConstruct;
import kr.s2.ext.log.S2LogManager;
import kr.s2.ext.log.S2Logger;
import kr.s2.ext.log.S2LoggerFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.Configuration;

/**
 * <pre>
 * << 개정이력(Modification Information) >>
 *
 *  수정일                수정자        수정내용
 *
 *  ------------       --------    ---------------------------
 *
 *  2025. 02. 15.      s2          최초생성
 * </pre>
 */
@Configuration
public class S2LoggerConfig {

    @PostConstruct
    public void initializeLogger() {
        // SLF4J 로거를 사용하는 커스텀 로거 팩토리 설정
        S2LogManager.setLoggerFactory(new S2LoggerFactory() {
            @Override
            public S2Logger getLogger(Class<?> clazz) {
                final Logger logger = LoggerFactory.getLogger(clazz);
                return new S2Logger() {
                    @Override
                    public void debug(String message) {
                        logger.debug(message);
                    }

                    @Override
                    public void info(String message) {
                        logger.info(message);
                    }

                    @Override
                    public void warn(String message) {
                        logger.warn(message);
                    }

                    @Override
                    public void error(String message) {
                        logger.error(message);
                    }

                    @Override
                    public void error(String message, Throwable t) {
                        logger.error(message, t);
                    }
                };
            }

            @Override
            public S2Logger getLogger(String name) {
                return getLogger(getClass());
            }
        });
    }
}